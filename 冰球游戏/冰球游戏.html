<!DOCTYPE html>
<html>
<head>
    <title>弹球游戏</title>
    <style>
        #game-container {
            width: 620px;
            height: 320px;
            border: 1px solid #000;
            position: relative;
            overflow: hidden;
            margin: 20px auto;
        }
        
        #paddle {
            width: 70px;
            height: 10px;
            background: #333;
            position: absolute;
            bottom: 10px;
            left: 0;
        }
        
        #ball {
            width: 10px;
            height: 10px;
            background: red;
            border-radius: 50%;
            position: absolute;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="ball"></div>
        <div id="paddle"></div>
    </div>

    <script>
        const gameContainer = document.getElementById('game-container');
        const ball = document.getElementById('ball');
        const paddle = document.getElementById('paddle');
        
        let ballPos = { x: 300, y: 150 };
        let paddlePos = 275;
        let direction = { x: Math.random() > 0.5 ? 1 : -1, y: -1 };
        let gameRunning = true;

        // 初始化游戏
        function init() {
            paddle.style.left = paddlePos + 'px';
            ball.style.left = ballPos.x + 'px';
            ball.style.top = ballPos.y + 'px';
            
            document.addEventListener('keydown', handleKeyPress);
            gameLoop();
        }

        // 键盘事件处理
        function handleKeyPress(e) {
            if (e.key === 'a' && paddlePos > 0) {
                paddlePos -= 20;
            } else if (e.key === 'd' && paddlePos < 550) {
                paddlePos += 20;
            }
            paddle.style.left = paddlePos + 'px';
        }

        // 碰撞检测
        function checkCollisions() {
            // 左右边界碰撞
            if (ballPos.x <= 0 || ballPos.x >= 610) {
                direction.x *= -1;
            }
            
            // 顶部碰撞
            if (ballPos.y <= 0) {
                direction.y *= -1;
            }
            
            // 挡板碰撞
            if (ballPos.y >= 300 && 
                ballPos.x >= paddlePos - 10 && 
                ballPos.x <= paddlePos + 70) {
                direction.y *= -1;
            }
        }

        // 游戏循环
        function gameLoop() {
            if (!gameRunning) return;

            checkCollisions();
            
            ballPos.x += direction.x;
            ballPos.y += direction.y;
            
            ball.style.left = ballPos.x + 'px';
            ball.style.top = ballPos.y + 'px';
            
            // 游戏结束检测
            if (ballPos.y > 320) {
                gameRunning = false;
                alert('游戏结束！');
                return;
            }

            requestAnimationFrame(gameLoop);
        }

        init();
    </script>
</body>
</html>